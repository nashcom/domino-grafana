CXX      = g++
CXXFLAGS = -O2 -Wall -pedantic -flto
LDFLAGS  = -static -flto
LDLIBS   = $(shell pkg-config --static --libs libcurl)

TARGET = domfwd
OBJS   = domfwd.o simple_wal.o

all: $(TARGET)

$(TARGET): $(OBJS)
	$(CXX) $(LDFLAGS) -o $@ $(OBJS) $(LDLIBS)

domfwd.o: domfwd.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

simple_wal.o: simple_wal.cpp simple_wal.hpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

clean:
	rm -f $(TARGET) $(OBJS)

